<!DOCTYPE html><html><head><meta charset="utf-8"><title>02_类加载子系统 | 子小孙</title><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="1、内存结构的概述"><meta property="og:type" content="article"><meta property="og:title" content="02_类加载子系统"><meta property="og:url" content="httpss://edg7928.gitee.io/2021/04/15/02_类加载子系统/index.html"><meta property="og:site_name" content="子小孙"><meta property="og:description" content="1、内存结构的概述"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E7%AE%80%E5%9B%BE.jpg"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E8%8B%B1.jpg"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E4%B8%AD.jpg"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405154241641.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405154524267.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B.jpg"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210406201208952.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405155623036.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405155954724.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405192944395.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405193156149.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405193519650.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405195942291.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405200707333.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405201820866.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405202750163.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204232060.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204319220.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204354540.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204904397.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214114012.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214547995.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214731940.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214818091.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405220047876.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405221552015.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405221653866.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405221927547.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405222123517.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405222305101.png"><meta property="article:published_time" content="2021-04-15T12:35:10.869Z"><meta property="article:modified_time" content="2021-04-15T13:25:48.390Z"><meta property="article:author" content="sxll"><meta property="article:tag" content="JavaJVMNotes"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E7%AE%80%E5%9B%BE.jpg"><link rel="alternate" href="/atom.xml" title="子小孙" type="application/atom+xml"><link rel="shortcut icon" href="/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">子小孙</a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a> <a id="nav-search-btn" class="nav-icon" title="搜索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="httpss://edg7928.gitee.io"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-02_类加载子系统" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting"><div class="article-meta"><a href="/2021/04/15/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/" class="article-date"><time class="dt-published" datetime="2021-04-15T12:35:10.869Z" itemprop="datePublished">2021-04-15</time></a><div class="article-category"><a class="article-category-link" href="/categories/JVM/">JVM</a>►<a class="article-category-link" href="/categories/JVM/%E4%B8%8A%E7%AF%87%EF%BC%9A%E5%86%85%E5%AD%98%E4%B8%8EGC/">上篇：内存与GC</a></div></div><div class="article-inner"><header class="article-header"><h1 class="p-name article-title" itemprop="headline name">02_类加载子系统</h1></header><div class="e-content article-entry" itemprop="articleBody"><h1 id="1、内存结构的概述"><a href="#1、内存结构的概述" class="headerlink" title="1、内存结构的概述"></a>1、内存结构的概述</h1><span id="more"></span><p>开始讲之前，先看一下内存图</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E7%AE%80%E5%9B%BE.jpg" alt="第02章_JVM架构-简图"></p><p>下面是更加详细的图，有英文图，还有中文图</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E8%8B%B1.jpg" alt="第02章_JVM架构-英"></p><p>中文图如下：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_JVM%E6%9E%B6%E6%9E%84-%E4%B8%AD.jpg" alt="第02章_JVM架构-中"></p><p>如果想自己写一个java虚拟机的话，主要考虑哪些结构？ 类加载器 和 执行引擎</p><h1 id="2、类加载器与类的加载过程"><a href="#2、类加载器与类的加载过程" class="headerlink" title="2、类加载器与类的加载过程"></a>2、类加载器与类的加载过程</h1><h2 id="2-1、类加载子系统的作用"><a href="#2-1、类加载子系统的作用" class="headerlink" title="2.1、类加载子系统的作用"></a>2.1、类加载子系统的作用</h2><blockquote><p>1、类加载子系统负责从<strong>文件系统 **或者</strong>网络<strong>中加载class文件，class文件在文件的开头有</strong>特定的文件标识**。</p><p>2、ClassLoader只负责class文件的加载，至于它（指的是class文件）是否可以运行，则由<strong>执行引擎</strong>（Execution Engine）决定。</p><p>3、<strong>加载的类信息</strong>存放在一块称为<strong>方法区</strong>的内存空间中。除了类的信息外，方法区中还会存放<strong>运行时常量池信息</strong>，可能还包括字符串字面量和数字常量（这部分常量信息时class文件常量池部分的内存映射）。</p></blockquote><h2 id="2-2、类加载器ClassLoader角色"><a href="#2-2、类加载器ClassLoader角色" class="headerlink" title="2.2、类加载器ClassLoader角色"></a>2.2、类加载器ClassLoader角色</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405154241641.png" alt="image-20210405154241641"></p><h2 id="2-3、类的加载过程"><a href="#2-3、类的加载过程" class="headerlink" title="2.3、类的加载过程"></a>2.3、类的加载过程</h2><p><strong>简略过程</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405154524267.png" alt="image-20210405154524267"></p><p><strong>详细过程</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/%E7%AC%AC02%E7%AB%A0_%E7%B1%BB%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B.jpg" alt="第02章_类的加载过程"></p><p><strong>加载</strong>：</p><blockquote><p>1、通过一个类的全限定名获取定义此类的二进制字节流</p><p>2、讲这个字节流所代表的静态存储结构转化为方法区的运行时数据结构</p><p>3、<strong>在内存中生成一个代表这个类的java.lang.Class对象</strong>，作为方法区这个类的各种数据的访问接口</p></blockquote><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210406201208952.png" alt="image-20210406201208952"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405155623036.png" alt="image-20210405155623036"></p><p><strong>链接</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405155954724.png" alt="image-20210405155954724"></p><p><strong>初始化</strong>：</p><blockquote><p>1、<strong>初始化阶段就是执行类构造器方法<clinit>() 的过程</clinit></strong></p><p>2、此方法不需要定义，是javac编译器自动收集类中的所有类变量的赋值动作和静态代码块中的语句合并来的。</p><p>3、构造器方法中的指令按语句在源文件中出现的顺序执行</p><p>4、**<clinit>() 不同于类的构造器。**（关联：构造器是虚拟机视角下的<init>() ）</init></clinit></p><p>5、若该类有父类，JVM会保证子类的<clinit>()执行前，父类的已经执行完毕。</clinit></p><p>6、虚拟机必须保证一个类的<clinit>()方法在多线程下被同步加锁。</clinit></p></blockquote><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405192944395.png" alt="image-20210405192944395"></p><h1 id="3、类加载器的分类"><a href="#3、类加载器的分类" class="headerlink" title="3、类加载器的分类"></a>3、类加载器的分类</h1><h2 id="3-1、概述"><a href="#3-1、概述" class="headerlink" title="3.1、概述"></a>3.1、概述</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405193156149.png" alt="image-20210405193156149"></p><p>下图中，最上边的是引导类加载器，下边的扩展类加载器和系统类（应用程序类）加载器都是自定义加载器</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405193519650.png" alt="image-20210405193519650"></p><p>这里面的四者的关系是包含的关系，并不是上下层的关系，也不是子父类继承的关系</p><p>对于用户自定义类来说：默认使用的是系统类加载器</p><p>String类使用的是引导类加载器进行加载。 Java的核心类库都是使用的引导类加载器进行加载的</p><p>引导类加载器是在程序中获取不到的（输出null），就因为它只用来加载核心类库，我们写的代码鸟都不鸟</p><p>下图是相关的程序实例：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405195942291.png" alt="image-20210405195942291"></p><h2 id="3-2、虚拟机自带的加载器"><a href="#3-2、虚拟机自带的加载器" class="headerlink" title="3.2、虚拟机自带的加载器"></a>3.2、虚拟机自带的加载器</h2><h3 id="3-2-1、启动类加载器（引导类加载器，BootStrap-ClassLoader）"><a href="#3-2-1、启动类加载器（引导类加载器，BootStrap-ClassLoader）" class="headerlink" title="3.2.1、启动类加载器（引导类加载器，BootStrap ClassLoader）"></a>3.2.1、启动类加载器（引导类加载器，BootStrap ClassLoader）</h3><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405200707333.png" alt="image-20210405200707333"></p><p>解释”加载拓展类和应用程序类加载器“：由上面的知识可知，拓展类加载器和应用程序类加载器是一个对象，这个对象就要对应着一个类就需要加载，这个类属于核心类库，所以也需要使用引导类加载器进行加载</p><h3 id="3-2-2、拓展类加载器（Extension-ClassLoader）"><a href="#3-2-2、拓展类加载器（Extension-ClassLoader）" class="headerlink" title="3.2.2、拓展类加载器（Extension ClassLoader）"></a>3.2.2、拓展类加载器（Extension ClassLoader）</h3><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405201820866.png" alt="image-20210405201820866"></p><p>由第一条知：$符号是内部类的意思</p><p>注：这里的父类加载器不是Java中的继承关系，是指这个类是由哪个加载器加载进内存的</p><h3 id="3-2-3、应用程序类加载器（系统类加载器，App-ClassLoader）"><a href="#3-2-3、应用程序类加载器（系统类加载器，App-ClassLoader）" class="headerlink" title="3.2.3、应用程序类加载器（系统类加载器，App ClassLoader）"></a>3.2.3、应用程序类加载器（系统类加载器，App ClassLoader）</h3><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405202750163.png" alt="image-20210405202750163"></p><p>有人说，这里的父类加载器可以改成上级加载器，意思是由上一层加载器加载；周志明书里说，类加载器之间的关系不是是靠继承关系实现的，而是靠组合关系实现的</p><p>相关程序示例：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204232060.png" alt="image-20210405204232060"></p><p>运行结果：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204319220.png" alt="image-20210405204319220"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204354540.png" alt="image-20210405204354540"></p><h3 id="3-2-4、用户自定义类加载器（User-Defined-Class-Loader）"><a href="#3-2-4、用户自定义类加载器（User-Defined-Class-Loader）" class="headerlink" title="3.2.4、用户自定义类加载器（User Defined Class Loader）"></a>3.2.4、用户自定义类加载器（User Defined Class Loader）</h3><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405204904397.png" alt="image-20210405204904397"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214114012.png" alt="image-20210405214114012"></p><h1 id="4、ClassLoader的使用说明"><a href="#4、ClassLoader的使用说明" class="headerlink" title="4、ClassLoader的使用说明"></a>4、ClassLoader的使用说明</h1><p>ClassLoader类，是一个抽象类，其后所有的类加载器都继承自ClassLoader（不包括启动类加载器）</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214547995.png" alt="image-20210405214547995"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214731940.png" alt="image-20210405214731940"></p><p>获取ClassLoader的途径</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405214818091.png" alt="image-20210405214818091"></p><h1 id="5、双亲委派机制（重要）"><a href="#5、双亲委派机制（重要）" class="headerlink" title="5、双亲委派机制（重要）"></a>5、双亲委派机制（重要）</h1><p>Java虚拟机对class文件采用的是<strong>按需加载</strong>的方式，也就是说，当需要使用该类的时候才会将它的class为见加载到内存生成class对象。而且加载某个类的class文件时，Java虚拟机采用的是<strong>双亲委派模式</strong>，即把请求交由父类处理，他是一种任务委派模式。有人用通俗语言解释这个模式：<strong>我爸是李刚，有事找我爸</strong>。</p><p><strong>工作原理</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405220047876.png" alt="image-20210405220047876"></p><p>注：这里不是继承。</p><p><strong>举例1</strong>：孙子、父亲、爷爷，互相让苹果</p><p><strong>举例2</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405221552015.png" alt="image-20210405221552015"></p><p><strong>优势</strong>：</p><blockquote><p>1、避免类的重复加载</p><p>2、保护程序安全，防止核心API被随意篡改。例如，自定义类java.lang.String、自定义类java.lang.Sxll</p></blockquote><p><strong>沙箱安全机制：</strong></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405221653866.png" alt="image-20210405221653866"></p><h1 id="6、其他"><a href="#6、其他" class="headerlink" title="6、其他"></a>6、其他</h1><p>补充内容1：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405221927547.png" alt="image-20210405221927547"></p><p>补充内容2：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405222123517.png" alt="image-20210405222123517"></p><p>类的主动使用和被动使用：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/02_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/image-20210405222305101.png" alt="image-20210405222305101"></p></div><footer class="article-footer"><a data-url="httpss://edg7928.gitee.io/2021/04/15/02_类加载子系统/" data-id="cknojqdbt0003vg8idy3s12he" data-title="02_类加载子系统" class="article-share-link">分享</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaJVMNotes/" rel="tag">JavaJVMNotes</a></li></ul></footer></div><nav id="article-nav"><a href="/2021/04/16/14_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%A6%82%E8%BF%B0/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">前一篇</strong><div class="article-nav-title">14_垃圾回收概述.md</div></a><a href="/2021/04/15/01_JVM%E4%B8%8EJava%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">后一篇</strong><div class="article-nav-title">01_JVM与Java体系结构</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">分类</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo%E5%8D%9A%E5%AE%A2/">Hexo博客</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo%E5%8D%9A%E5%AE%A2/SSH%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/">SSH免密登录</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo%E5%8D%9A%E5%AE%A2/%E5%88%9D%E5%A7%8B%E5%8C%96/">初始化</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/%E4%B8%8A%E7%AF%87%EF%BC%9A%E5%86%85%E5%AD%98%E4%B8%8EGC/">上篇：内存与GC</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91/">树</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF/">后端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E5%90%8E%E7%AB%AF/Java/">Java</a></li></ul></li></ul></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CRLF/" rel="tag">CRLF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo%E5%8D%9A%E5%AE%A2/" rel="tag">Hexo博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaJVMNotes/" rel="tag">JavaJVMNotes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LF/" rel="tag">LF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E4%BA%AB/" rel="tag">分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%BC%E8%88%AA/" rel="tag">导航</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91/" rel="tag">树</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/CRLF/" style="font-size:10px">CRLF</a> <a href="/tags/Hexo%E5%8D%9A%E5%AE%A2/" style="font-size:15px">Hexo博客</a> <a href="/tags/JavaJVMNotes/" style="font-size:20px">JavaJVMNotes</a> <a href="/tags/LF/" style="font-size:10px">LF</a> <a href="/tags/SSH/" style="font-size:10px">SSH</a> <a href="/tags/git/" style="font-size:10px">git</a> <a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size:10px">分享</a> <a href="/tags/%E5%AF%BC%E8%88%AA/" style="font-size:10px">导航</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:10px">数据结构</a> <a href="/tags/%E6%A0%91/" style="font-size:10px">树</a></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul><li><a href="/2021/04/18/git%E7%9A%84autocrlf%E4%B8%8Esafecrlf%E7%9A%84%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE/">git的autocrlf与safecrlf的相关设置</a></li><li><a href="/2021/04/18/15_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95/">15_垃圾回收相关算法</a></li><li><a href="/2021/04/16/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">个人博客</a></li><li><a href="/2021/04/16/SSH%E7%9A%84%E5%85%AC%E9%92%A5%E5%92%8C%E7%A7%81%E9%92%A5%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/">SSH的公钥和私钥的相关配置</a></li><li><a href="/2021/04/16/14_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%A6%82%E8%BF%B0/">14_垃圾回收概述.md</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2021 sxll<br>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="/js/jquery-3.4.1.min.js"></script><script src="/fancybox/jquery.fancybox.min.js"></script><script src="/js/script.js"></script></div></body></html>