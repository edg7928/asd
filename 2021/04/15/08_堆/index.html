<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"edg7928.gitee.io",root:"/",images:"/images",scheme:"Gemini",version:"8.3.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,width:250},copycode:!0,bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"},path:"/search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="1、堆的核心概念"><meta property="og:type" content="article"><meta property="og:title" content="08_堆"><meta property="og:url" content="httpss://edg7928.gitee.io/2021/04/15/08_堆/index.html"><meta property="og:site_name" content="子小孙"><meta property="og:description" content="1、堆的核心概念"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411091825935.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411093005467.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411092900764.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411094154410.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411095630434.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191433730.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191455563.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411100825064.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411183913199.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411184739512.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411190410591.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411185410113.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411185827832.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191547334.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191702038.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/%E7%AC%AC08%E7%AB%A0_%E6%96%B0%E7%94%9F%E4%BB%A3%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6%E8%BF%87%E7%A8%8B.jpg"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411200223566.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411201134973.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411201415645.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411202512138.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411203112140.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411204902770.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411205142708.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411205241652.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411205439930.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411211524073.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411211618889.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411212133633.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411212218809.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213253889.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213415969.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213533152.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213715897.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411214200826.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411214723927.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411215043630.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411220702977.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411221533744.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411223743896.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224036862.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224109462.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224232302.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224531709.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224630021.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411225024309.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412090818021.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412091130630.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412092025429.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412092216518.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412093620746.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412093930576.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412094208888.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412094852000.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412095059089.png"><meta property="og:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412095521608.png"><meta property="article:published_time" content="2021-04-15T12:35:10.731Z"><meta property="article:modified_time" content="2021-04-15T13:19:53.783Z"><meta property="article:author" content="sxll"><meta property="article:tag" content="JavaJVMNotes"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411091825935.png"><link rel="canonical" href="httpss://edg7928.gitee.io/2021/04/15/08_堆/"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>08_堆 | 子小孙</title><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">子小孙</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">21</span></a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1%E3%80%81%E5%A0%86%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">1、堆的核心概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">1.1、基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2%E3%80%81%E5%86%85%E5%AD%98%E7%BB%86%E5%88%86"><span class="nav-number">1.2.</span> <span class="nav-text">1.2、内存细分</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2%E3%80%81%E8%AE%BE%E7%BD%AE%E5%A0%86%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F%E4%B8%8EOOM"><span class="nav-number">2.</span> <span class="nav-text">2、设置堆内存大小与OOM</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1%E3%80%81%E8%AE%BE%E7%BD%AE%E5%A0%86%E7%A9%BA%E9%97%B4%E5%A4%A7%E5%B0%8F"><span class="nav-number">2.1.</span> <span class="nav-text">2.1、设置堆空间大小</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2%E3%80%81OOM%EF%BC%88OutOfMemoryError%EF%BC%89%E4%B8%BE%E4%BE%8B"><span class="nav-number">2.2.</span> <span class="nav-text">2.2、OOM（OutOfMemoryError）举例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3%E3%80%81%E5%B9%B4%E8%BD%BB%E4%BB%A3%E5%92%8C%E8%80%81%E5%B9%B4%E4%BB%A3"><span class="nav-number">3.</span> <span class="nav-text">3、年轻代和老年代</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4%E3%80%81%E5%9B%BE%E8%A7%A3%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">4、图解对象分配过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1%E3%80%81%E4%B8%80%E8%88%AC%E8%BF%87%E7%A8%8B"><span class="nav-number">4.1.</span> <span class="nav-text">4.1、一般过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2%E3%80%81%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5"><span class="nav-number">4.2.</span> <span class="nav-text">4.2、特殊情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3%E3%80%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.3.</span> <span class="nav-text">4.3、代码示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4%E3%80%81%E5%B8%B8%E7%94%A8%E7%9A%84%E8%B0%83%E4%BC%98%E5%B7%A5%E5%85%B7"><span class="nav-number">4.4.</span> <span class="nav-text">4.4、常用的调优工具</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5%E3%80%81Minor-GC%E3%80%81Major-GC%E3%80%81Full-GC"><span class="nav-number">5.</span> <span class="nav-text">5、Minor GC、Major GC、Full GC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1%E3%80%81%E4%B8%89%E7%B1%BBGC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">5.1.</span> <span class="nav-text">5.1、三类GC的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2%E3%80%81%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%86%E4%BB%A3%E5%BC%8FGC%E7%AD%96%E7%95%A5%E7%9A%84%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6"><span class="nav-number">5.2.</span> <span class="nav-text">5.2、最简单的分代式GC策略的触发条件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6%E3%80%81%E5%A0%86%E7%A9%BA%E9%97%B4%E7%9A%84%E5%88%86%E4%BB%A3%E6%80%9D%E6%83%B3"><span class="nav-number">6.</span> <span class="nav-text">6、堆空间的分代思想</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7%E3%80%81%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5%EF%BC%88%E6%88%96%E5%AF%B9%E8%B1%A1%E6%8F%90%E5%8D%87%EF%BC%88Promotion%EF%BC%89%E8%A7%84%E5%88%99%EF%BC%89"><span class="nav-number">7.</span> <span class="nav-text">7、内存分配策略（或对象提升（Promotion）规则）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8%E3%80%81%E4%B8%BA%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98%EF%BC%9ATLAB"><span class="nav-number">8.</span> <span class="nav-text">8、为对象分配内存：TLAB</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9%E3%80%81%E5%B0%8F%E7%BB%93%EF%BC%9A%E5%A0%86%E7%9A%84%E5%8F%82%E6%95%B0%E8%AE%BE%E7%BD%AE"><span class="nav-number">9.</span> <span class="nav-text">9、小结：堆的参数设置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#X%E3%80%81%E5%A0%86%E6%98%AF%E5%88%86%E9%85%8D%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%94%AF%E4%B8%80%E9%80%89%E6%8B%A9%E5%90%97%EF%BC%9F%E4%B8%8D%E6%98%AF"><span class="nav-number">10.</span> <span class="nav-text">X、堆是分配对象的唯一选择吗？不是</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#X-1%E3%80%81%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90"><span class="nav-number">10.1.</span> <span class="nav-text">X.1、逃逸分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#X-2%E3%80%81%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%EF%BC%9A%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96"><span class="nav-number">10.2.</span> <span class="nav-text">X.2、逃逸分析：代码优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#X-3%E3%80%81%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%E5%B0%8F%E7%BB%93%EF%BC%9A%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%E8%BF%98%E4%B8%8D%E6%98%AF%E5%BE%88%E6%88%90%E7%86%9F"><span class="nav-number">10.3.</span> <span class="nav-text">X.3、逃逸分析小结：逃逸分析还不是很成熟</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%93"><span class="nav-number">11.</span> <span class="nav-text">本章小结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="sxll" src="/uploads/smallgirl.gif"><p class="site-author-name" itemprop="name">sxll</p><div class="site-description" itemprop="description">明天，你好</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/edg7928" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;edg7928" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll site-overview-item animated"><div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.baidu.com/" title="https:&#x2F;&#x2F;www.baidu.com&#x2F;" rel="noopener" target="_blank">Baidu</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <a href="https://github.com/edg7928" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="httpss://edg7928.gitee.io/2021/04/15/08_堆/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/smallgirl.gif"><meta itemprop="name" content="sxll"><meta itemprop="description" content="明天，你好"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="子小孙"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">08_堆</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-04-15 20:35:10 / 修改时间：21:19:53" itemprop="dateCreated datePublished" datetime="2021-04-15T20:35:10+08:00">2021-04-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JVM/" itemprop="url" rel="index"><span itemprop="name">JVM</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JVM/%E4%B8%8A%E7%AF%87%EF%BC%9A%E5%86%85%E5%AD%98%E4%B8%8EGC/" itemprop="url" rel="index"><span itemprop="name">上篇：内存与GC</span></a></span></span></div><div class="post-meta"><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="1、堆的核心概念"><a href="#1、堆的核心概念" class="headerlink" title="1、堆的核心概念"></a>1、堆的核心概念</h1><span id="more"></span><h2 id="1-1、基本概念"><a href="#1-1、基本概念" class="headerlink" title="1.1、基本概念"></a>1.1、基本概念</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411091825935.png" alt="image-20210411091825935"></p><p><strong>一个java程序对应一个进程，一个进程就对应着一个JVM的实例，一个JVM实例中只有一个运行时数据区，里面只有一个方法区和一个堆，有多个线程共享同一个堆和方法区，每个线程都各自拥有一份程序计数器、本地方法栈和虚拟机栈</strong>。</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411093005467.png" alt="image-20210411093005467"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411092900764.png" alt="image-20210411092900764"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411094154410.png" alt="image-20210411094154410"></p><h2 id="1-2、内存细分"><a href="#1-2、内存细分" class="headerlink" title="1.2、内存细分"></a>1.2、内存细分</h2><p><strong>现代垃圾回收器大部分都基于分代收集理论的设计，堆空间细分为</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411095630434.png" alt="image-20210411095630434"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191433730.png" alt="image-20210411191433730"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191455563.png" alt="image-20210411191455563"></p><p>注：逻辑上是存在三部分，实际上在设置堆空间大小时，是不包括元空间或永久区的</p><p>JDK8中内存结构有哪些变化，其中之一就是永久代变成了元空间</p><h1 id="2、设置堆内存大小与OOM"><a href="#2、设置堆内存大小与OOM" class="headerlink" title="2、设置堆内存大小与OOM"></a>2、设置堆内存大小与OOM</h1><h2 id="2-1、设置堆空间大小"><a href="#2-1、设置堆空间大小" class="headerlink" title="2.1、设置堆空间大小"></a>2.1、设置堆空间大小</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411100825064.png" alt="image-20210411100825064"></p><p>注：<code>-Xms</code>：用来设置堆空间（年轻代 + 老年代）的初始内存大小。其中<code>-X</code>是<code>JVM</code>的运行参数；<code>ms</code>是memory start。</p><p><code>-Xms</code>：用来设置堆空间（年轻代 + 老年代）的最大内存大小。</p><p>如何查看设置的参数：方式一： <code>jps / jstat -gc 进程id</code>；**方式二：<code>-XX:PrintGCDetails</code>**。</p><h2 id="2-2、OOM（OutOfMemoryError）举例"><a href="#2-2、OOM（OutOfMemoryError）举例" class="headerlink" title="2.2、OOM（OutOfMemoryError）举例"></a>2.2、OOM（OutOfMemoryError）举例</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411183913199.png" alt="image-20210411183913199"></p><p>注：Class Throwable有两个子类Error和Exception，这是狭义上的异常，广义上的异常，指的开发中遇到的凡是程序不正常的情况</p><h1 id="3、年轻代和老年代"><a href="#3、年轻代和老年代" class="headerlink" title="3、年轻代和老年代"></a>3、年轻代和老年代</h1><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411184739512.png" alt="image-20210411184739512"></p><p>注：堆中存储的东西现在Eden中，过了一段时间没有消亡，就转到survivor中，再过一会还是没有消亡，就会进入老年代。</p><p>图示：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411190410591.png" alt="image-20210411190410591"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411185410113.png" alt="image-20210411185410113"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411185827832.png" alt="image-20210411185827832"></p><p>注：<code>-XX:UseAdaptiveSizePolicy</code>是用来关闭自适应的内存分配策略</p><p>如果<code>-Xmn</code>和<code>NewRatio</code>冲突的话，以<code>-Xmn</code>为准。（一般会不设置）</p><h1 id="4、图解对象分配过程"><a href="#4、图解对象分配过程" class="headerlink" title="4、图解对象分配过程"></a>4、图解对象分配过程</h1><h2 id="4-1、一般过程"><a href="#4-1、一般过程" class="headerlink" title="4.1、一般过程"></a>4.1、一般过程</h2><p><strong>概述</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191547334.png" alt="image-20210411191547334"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411191702038.png" alt="image-20210411191702038"></p><p>注：Eden区满的时候会触发YGC/Minor GC，但是survivor区满的时候不会触发；当Eden区满的时候，会将Eden区和Survivor区一起回收。有的对象刚创建就在老年区了，还有的age没有达到15，也进入了老年代。</p><p><strong>图解</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/%E7%AC%AC08%E7%AB%A0_%E6%96%B0%E7%94%9F%E4%BB%A3%E5%AF%B9%E8%B1%A1%E5%88%86%E9%85%8D%E4%B8%8E%E5%9B%9E%E6%94%B6%E8%BF%87%E7%A8%8B.jpg" alt="第08章_新生代对象分配与回收过程"></p><p><strong>总结</strong>：</p><blockquote><p>1、针对幸存者s0，s1的总结：复制之后有交换，谁空谁是to</p><p>2、关于垃圾回收：频繁在新生代收集，很少在老年代收集，几乎不再永久代/元空间收集。</p></blockquote><h2 id="4-2、特殊情况"><a href="#4-2、特殊情况" class="headerlink" title="4.2、特殊情况"></a>4.2、特殊情况</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411200223566.png" alt="image-20210411200223566"></p><p>注：YGC之后，Eden区一定是空的。</p><h2 id="4-3、代码示例"><a href="#4-3、代码示例" class="headerlink" title="4.3、代码示例"></a>4.3、代码示例</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411201134973.png" alt="image-20210411201134973"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411201415645.png" alt="image-20210411201415645"></p><h2 id="4-4、常用的调优工具"><a href="#4-4、常用的调优工具" class="headerlink" title="4.4、常用的调优工具"></a>4.4、常用的调优工具</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411202512138.png" alt="image-20210411202512138"></p><h1 id="5、Minor-GC、Major-GC、Full-GC"><a href="#5、Minor-GC、Major-GC、Full-GC" class="headerlink" title="5、Minor GC、Major GC、Full GC"></a>5、Minor GC、Major GC、Full GC</h1><h2 id="5-1、三类GC的区别"><a href="#5-1、三类GC的区别" class="headerlink" title="5.1、三类GC的区别"></a>5.1、三类GC的区别</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411203112140.png" alt="image-20210411203112140"></p><p>注：所谓调优，就是希望垃圾回收的次数少一些。Major GC和Full GC的时间比Minor GC长很多，主要是让他们回收的次数少一些。而且Major GC和Full GC的区分很重要。</p><h2 id="5-2、最简单的分代式GC策略的触发条件"><a href="#5-2、最简单的分代式GC策略的触发条件" class="headerlink" title="5.2、最简单的分代式GC策略的触发条件"></a>5.2、最简单的分代式GC策略的触发条件</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411204902770.png" alt="image-20210411204902770"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411205142708.png" alt="image-20210411205142708"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411205241652.png" alt="image-20210411205241652"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411205439930.png" alt="image-20210411205439930"></p><h1 id="6、堆空间的分代思想"><a href="#6、堆空间的分代思想" class="headerlink" title="6、堆空间的分代思想"></a>6、堆空间的分代思想</h1><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411211524073.png" alt="image-20210411211524073"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411211618889.png" alt="image-20210411211618889"></p><h1 id="7、内存分配策略（或对象提升（Promotion）规则）"><a href="#7、内存分配策略（或对象提升（Promotion）规则）" class="headerlink" title="7、内存分配策略（或对象提升（Promotion）规则）"></a>7、内存分配策略（或对象提升（Promotion）规则）</h1><p><strong>一般原则</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411212133633.png" alt="image-20210411212133633"></p><p><strong>特殊情况</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411212218809.png" alt="image-20210411212218809"></p><h1 id="8、为对象分配内存：TLAB"><a href="#8、为对象分配内存：TLAB" class="headerlink" title="8、为对象分配内存：TLAB"></a>8、为对象分配内存：TLAB</h1><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213253889.png" alt="image-20210411213253889"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213415969.png" alt="image-20210411213415969"></p><p><strong>图示</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213533152.png" alt="image-20210411213533152"></p><p><strong>TLAB再说明</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411213715897.png" alt="image-20210411213715897"></p><p>注：TLAB默认是开启状态。</p><p><strong>对象分配过程：TLAB</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411214200826.png" alt="image-20210411214200826"></p><h1 id="9、小结：堆的参数设置"><a href="#9、小结：堆的参数设置" class="headerlink" title="9、小结：堆的参数设置"></a>9、小结：堆的参数设置</h1><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411214723927.png" alt="image-20210411214723927"></p><p>注：具体查看某个参数的指令：1、jps：用来查看当前运行的进程号；2、jinfo -flag 某参数名 进程id</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411215043630.png" alt="image-20210411215043630"></p><p><strong>空间分配担保</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411220702977.png" alt="image-20210411220702977"></p><h1 id="X、堆是分配对象的唯一选择吗？不是"><a href="#X、堆是分配对象的唯一选择吗？不是" class="headerlink" title="X、堆是分配对象的唯一选择吗？不是"></a>X、堆是分配对象的唯一选择吗？不是</h1><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411221533744.png" alt="image-20210411221533744"></p><h2 id="X-1、逃逸分析"><a href="#X-1、逃逸分析" class="headerlink" title="X.1、逃逸分析"></a>X.1、逃逸分析</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411223743896.png" alt="image-20210411223743896"></p><p><strong>举例1</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224036862.png" alt="image-20210411224036862"></p><p><strong>举例2</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224109462.png" alt="image-20210411224109462"></p><p><strong>举例3</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224232302.png" alt="image-20210411224232302"></p><p><strong>如何快速判断是否发生了逃逸分析</strong>？大家就看new的<strong>对象实体</strong>是否在方法外被调用。</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224531709.png" alt="image-20210411224531709"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411224630021.png" alt="image-20210411224630021"></p><p>上图最后一项，对象实体不是方法中的，是在方法外。</p><p><strong>只要没有发生逃逸，就可以考虑栈上分配</strong>。</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210411225024309.png" alt="image-20210411225024309"></p><p><strong>结论：开发中能够使用局部变量的，就不要使用方法外定义</strong>。</p><h2 id="X-2、逃逸分析：代码优化"><a href="#X-2、逃逸分析：代码优化" class="headerlink" title="X.2、逃逸分析：代码优化"></a>X.2、逃逸分析：代码优化</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412090818021.png" alt="image-20210412090818021"></p><p><strong>栈上分配</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412091130630.png" alt="image-20210412091130630"></p><p>注：没有发生逃逸的就可以进行栈上分配。</p><p><strong>同步省略</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412092025429.png" alt="image-20210412092025429"></p><p>注：如果锁对象没有逃逸，就可以进行锁消除。</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412092216518.png" alt="image-20210412092216518"></p><p><strong>标量替换或分离对象</strong>：</p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412093620746.png" alt="image-20210412093620746"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412093930576.png" alt="image-20210412093930576"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412094208888.png" alt="image-20210412094208888"></p><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412094852000.png" alt="image-20210412094852000"></p><h2 id="X-3、逃逸分析小结：逃逸分析还不是很成熟"><a href="#X-3、逃逸分析小结：逃逸分析还不是很成熟" class="headerlink" title="X.3、逃逸分析小结：逃逸分析还不是很成熟"></a>X.3、逃逸分析小结：逃逸分析还不是很成熟</h2><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412095059089.png" alt="image-20210412095059089"></p><p><strong>注</strong>：Oracle Hotspot VM中并未应用栈上分配，是用的标量替换而产生的同样的效果。所以栈上没有存对象，对象还是存在堆里。栈上是存的标量，并不是对象。</p><p><strong>以上是目前的理解，之后看书啥的可能还会变</strong>。</p><h1 id="本章小结"><a href="#本章小结" class="headerlink" title="本章小结"></a>本章小结</h1><p><img src="https://gitee.com/edg7928/jvmnotes/raw/master/08_%E5%A0%86/image-20210412095521608.png" alt="image-20210412095521608"></p></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="\2021\04\15\02_类加载子系统\" rel="bookmark">02_类加载子系统</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\2021\04\15\01_JVM与Java体系结构\" rel="bookmark">01_JVM与Java体系结构</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\2021\04\15\03_运行时数据区概述及线程\" rel="bookmark">03_运行时数据区概述及线程</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\2021\04\15\04_程序计数器（PC寄存器）\" rel="bookmark">04_程序计数器（PC寄存器）</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="\2021\04\15\05_虚拟机栈\" rel="bookmark">05_虚拟机栈</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>Buy me a coffee</div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>赞赏</button><div class="post-reward"><div><img src="/uploads/smallgirl.gif" alt="sxll 微信"> <span>微信</span></div><div><img src="https://gitee.com/edg7928/jvmnotes/raw/master/03_%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E6%A6%82%E8%BF%B0%E5%8F%8A%E7%BA%BF%E7%A8%8B/image-20210406202232005.png" alt="sxll 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>sxll</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="httpss://edg7928.gitee.io/2021/04/15/08_堆/" title="08_堆">httpss://edg7928.gitee.io/2021/04/15/08_堆/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><span>欢迎关注我的其它发布渠道</span><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="https://twitter.com/username"><span class="icon"><i class="fab fa-twitter"></i> </span><span class="label">Twitter</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="/images/wechat_channel.jpg"><span class="icon"><i class="fab fa-weixin"></i> </span><span class="label">WeChat</span></a></div></div></div><div class="post-tags"><a href="/tags/JavaJVMNotes/" rel="tag"><i class="fa fa-tag"></i> JavaJVMNotes</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2021/04/15/07_%E6%9C%AC%E5%9C%B0%E6%96%B9%E6%B3%95%E6%A0%88/" rel="prev" title="07_本地方法栈"><i class="fa fa-chevron-left"></i> 07_本地方法栈</a></div><div class="post-nav-item"><a href="/2021/04/15/09_%E6%96%B9%E6%B3%95%E5%8C%BA/" rel="next" title="09_方法区">09_方法区 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">sxll</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>站点总字数：</span> <span title="站点总字数">83k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:15</span></span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/local-search.js"></script></body></html>